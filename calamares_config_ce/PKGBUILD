# Maintainer: SnailDOS <encryptos@snaildos.com>


pkgname=calamares_config_ce
pkgver=26.05.1.1
pkgrel=1
_repo_name=EncryptOS-calamares
pkgdesc='Encrypt-OS calamares configuration files for Community Editions'
arch=('any')
url='https://www.Encrypt-OS.com'
license=('GPL3')
source=("https://github.com/Encrypt-OS/${_repo_name}/archive/refs/tags/${pkgver}.tar.gz")

sha512sums=('3fbc550d91eae1aa35fedf0df0248af31c6115c1efee16f31c8964fcd3122c6548df3a4da6889fe592dc09ce6e24151bed277b1c32aecf5c349013d09a6a581d')


_caldir="$pkgname/calamares"

prepare() {
    mkdir -p "$_caldir/modules"
    mv "$_repo_name-$pkgver"            "$_repo_name"

    cp "${_repo_name}/calamares/modules/netinstall-ce-base.yaml"            "$_caldir/modules/"
    cp "${_repo_name}/calamares/modules/packagechooser_ce.conf"             "$_caldir/modules/"
    cp "${_repo_name}/calamares/modules/netinstall_community_base.conf"     "$_caldir/modules/"
    cp "${_repo_name}/calamares/settings_community.conf"                    "$_caldir/"
    cp -R "${_repo_name}/calamares/images-ce"                               "$_caldir/"
}

package() {
    install -dm 755 "$pkgdir/etc/calamares"
    cp -r --no-preserve=ownership "$_caldir" "$pkgdir/etc/"
}
