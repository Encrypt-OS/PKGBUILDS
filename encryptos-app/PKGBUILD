# Maintainer: SnailDOS <snaildos@snaildos.com>

pkgname=encryptos-app
_pkgname=${pkgname%-bin}
pkgver=1.0.0
pkgrel=1
pkgdesc="The future of privacy. Manage your EncryptOS operating system with a single click."
arch=(x86_64)
url="https://encryptos.snaildos.com"
license=("GNU" "v3")
depends=(
  zlib
  libgl
  fuse2
)
provides=(encryptos-app)
conflicts=(encryptos-app)
options=(!strip)
source=(
  "encryptos-app-$pkgver.AppImage::https://github.com/Encrypt-OS/encryptos-app/releases/download/v$pkgver/encryptos-app-$pkgver.AppImage"
  "https://raw.githubusercontent.com/EncryptOS/encryptos-app/main/static/icons/icon.png"
  "https://raw.githubusercontent.com/EncryptOS/encryptos-app/main/LICENSE"
  "encryptos-app.desktop"
)
noextract=("encryptos-app.AppImage")
sha256sums=('b1ade4923f2a06799b2d50a80bc25efe182d3b6339c665837bcfbd5aa22b2793'
            '2230e5025d9fa4417c69b359bb8478d70f08450aef556227df7579779fa6ef08'
            '0bfebc9c7852e4cf48713cbc445971e7925122f2a202b60639ce36ca9dd3b932'
            '68976dc63d2eaf6c3583468d9b4fac42b34fdfb765c4e466c73016bd03e76965')

package() {
  cd "$srcdir"

  # Install binaries
  install -Dm755 "encryptos-app-$pkgver.AppImage" "$pkgdir/opt/encryptos-app/encryptos-app.AppImage"
  # install -Dm755 -t "$pkgdir/usr/bin" EncryptOS-app.AppImage

  # Install pixmap, desktop and license file
  install -Dm644 icon.png "$pkgdir/usr/share/pixmaps/encryptos-app.png"
  install -Dm644 -t "$pkgdir/usr/share/applications" encryptos-app.desktop
  install -Dm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
}
